---
title: Understand the permission tokens needed for embedding a Power BI application
description: Learn which tokens your Power BI application needs to authenticate against Azure and Power BI service.
author: KesemSharabi
ms.author: kesharab
ms.reviewer: amshuste
ms.service: powerbi
ms.subservice: powerbi-developer
ms.topic: conceptual
ms.date: 12/22/2020
---

# Embedded analytics application tokens

To consume Power BI content you need an access token. Depending on your solution, this token can be either an Azure AD token or an embed token.

If you're using the *embed for your customers* solution your users will be granted access to Power BI content (such as ...) according to the embed token that was generated by your application.

>[!NOTE]
>To allow access to your app, you can use any authentication method you want.

If you're using the *embed for your organization* solution your application users will be authenticating against Azure AD using their own credencials. Your app users will have access to Power BI content (such as ...) depending on the access the user has.

[Azure AD token](#azure-ad-token).

[embed token](#embed-token)


## Azure AD token

In both *embed for your customers* and *embed for your organization* solutions, before your application can access Power BI service, it must authenticate against Azure AD. After successfully authenticating against Azure AD, your app receives an Azure AD token (also known as an *access token*) allowing it to access Power BI. This token is required for all [REST API](/rest/api/power-bi/) operations, and it expires after an hour.

When using the *embed for your customers* solution, the *Azure AD token* is used to generate *embed tokens*.

## Embed token

When you're using the *embed for your customers* solution, your application needs to know which Power BI content its user can access. Use the [embed token](/rest/api/power-bi/embedtoken) REST API, to generate an embed token, which specifies the following:

* Which content your app can access

* Your app's access level (view, create, or edit)

For more information, see [Considerations when generating an embed token](generate-embed-token.md).

## Authentication flows

This section describes the authentication flows for the *embed for your customers* and *embed for your organization* embedding solutions.

### Embed for your customers
        
The *Embed for your customers* solution uses a non-interactive flow. Users do not need to sign in to Azure AD, to access Power BI. Instead, your app uses a dedicated Azure AD identity to authenticate and generate the *embed token*. The dedicated identity can be one of the following:

* **[Service principal](embed-service-principal.md)**

    Your app uses the Azure AD [service principal object](/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object) to authenticate against Azure AD and get the Azure AD access token.

* **Master user**

    Your app uses a [Power BI Pro](/power-bi/admin/service-admin-purchasing-power-bi-pro) or a [Premium Per User (PPU)](/power-bi/admin/service-premium-per-user-faq) account to authenticate against Azure AD and get the Azure AD access token. When using a *master user* you'll need to define your app [permissions](/azure/active-directory/develop/v2-permissions-and-consent) (also known as scopes) and the *master user* is required to grant consent for these permissions.

>[!NOTE]
>To embed using the *embed for your customers* solution, you'll need an A, EM, or P SKU. For production you'll need a capacity.

After successful authentication against Azure AD, your app will generate an [embed token](/rest/api/power-bi/embedtoken) to allow its users to access specific Power BI content.

This diagram shows the authentication flow for the *embed for your customers* solution.

>[!div class="mx-imgBorder"]
>:::image type="content" source="media/embed-tokens/paas-authentiction.png" alt-text="A diagram of the authentication flow in an embed for your customers Power B I embedded analytics solution.":::

0. App user authenticates against your web app (with your authentication method).

1. Your web app uses a *service principal* or a *master user* to authenticate against Azure AD.

2. Your web app gets an access token from Azure AD, caches the *Azure AD token*, and uses it to access Power BI REST APIs. Access to the APIs is given according to your authentication method:
    1. If you're using a *service principal*, your Azure AD app has access to all the APIs.
    2. If you're using a *master user*, the *master user* (or an administrator) has to provide consent for the APIs your app can use.

3. Your app calls the generate token REST API requesting the *embed token*.
 
4. Your web app generates an *embed token*, which specifies which Power BI content can be embedded.

5. Your web app provides the *embed token* to its user.

6. The web app user uses the *embed token* to access Power BI.

### Embed for your organization

The *Embed for your organization* solution uses an interactive flow. Your user's authenticate against Azure AD using their Power BI credentials. Users need to grant consent to your web app requested permissions. Consent is granted in the Microsoft *Permissions requested* dialog pop-up window. Any Power BI content the user has access to, can be embedded.

**REPLACE SCREENSHOT**

>[!div class="mx-imgBorder"]
>:::image type="content" source="media/embed-tokens/permissions-requested.png" alt-text="Screenshot showing the Microsoft permissions requested pop-up window which asks customers to grant permissions for accessing Power B I.":::

The *embed for your organization* solution doesn't support A SKUs.

This diagram shows the authentication flow for the *embed for your organization* solution.

>[!div class="mx-imgBorder"]
>:::image type="content" source="media/embed-tokens/saas-authentiction.png" alt-text="A diagram of the authentication flow in an embed for your organization Power B I embedded analytics solution.":::

1. User accesses the web app.

2. The web app redirects the user to Azure AD.

3. The user authenticates against Azure AD using his Power BI credentials.

4. Azure AD redirects the user back to the web app with the Azure AD token.

5. Your Power BI web caches the Azure AD token, and uses it to embed any Power BI content the user has rights to view.

## Next steps

>[!div class="nextstepaction"]
>[Considerations when generating an embed token](generate-embed-token.md)

>[!div class="nextstepaction"]
>[Capacity and SKUs in Power BI embedded analytics](embedded-capacity.md)

>[!div class="nextstepaction"]
>[More questions? Try asking the Power BI Community](https://community.powerbi.com/)